"use strict";$(function(){$("#occasion").hover(function(){$(".occasion").css("display","block")},function(){$(".occasion").css("display","none")}),$("button li").hover(function(){$(this).css("background","#ccc")},function(){$(this).css("background","#fff")});var s=!0,o=!0,t="",c=document.createElement("ul");function n(n){$(".page").remove();var t,s="";t=n.map(function(t){return'\n\t\t\t\t\t\t<li class="'+t.goodId+'">\n\t\t\t\t\t\t\t<a href="#"><img src="../'+t.url+'" alt="" /></a> \n\t\t\t\t\t\t\t<p><a href="#">'+t.title+'</a><span class="discount fr">'+t.discount+'</span></p>\n\t\t\t\t\t\t\t<p><a href="#">'+t.production+'</a></p>\n\t\t\t\t\t\t\t<p class="price"><span>'+t.currentPrice+"</span><del><span>"+t.originPrice+"</span></del></p>\n\t\t\t\t\t\t\t<p>"+t.imgIntroduction.map(function(t){return'\n\t\t\t\t\t\t\t\t\t\t\t<img src="../'+t+'" alt="" class="smallImg"/>\n\t\t\t\t\t\t\t\t\t\t'}).join("")+"</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"}).join(""),c.innerHTML=t,$(".goodslist").append(c);var o=$('<p style="text-align:center;" class="page"><span style="display:inline-block;width:70px;"><a href="javascript:void(0)">上一页</a></span></p>');o[0].innerHTML+=function(){for(var t=0;t<Math.ceil(n.length/5);t++)s+='<span style="display:inline-block;width:70px;"><a href="javascript:void(0)">'+(t+1)+"</a></span>";return s}(),o[0].innerHTML+='<span style="display:inline-block;width:70px;"><a href="javascript:void(0)">下一页</a></span>',$(".goodslist").append(o)}$.ajax({type:"get",async:!0,url:"../api/goodsList_data.json",success:function(t){n(t.goodslist[0].content),$(".totalGoodNum").text(""+t.goodslist[0].content.length)}}),$(".discountSort").click(function(){$.ajax({type:"get",async:!0,url:"../api/goodsList_data.json",success:function(t){n(t.goodslist[0].content.sort(function(t,n){return s?parseFloat(t.discount)-parseFloat(n.discount):parseFloat(n.discount)-parseFloat(t.discount)}))}}),s=!s}),$(".defaultSort").click(function(){$.ajax({type:"get",async:!0,url:"../api/goodsList_data.json",success:function(t){n(t.goodslist[0].content),$(".totalGoodNum").text(""+t.goodslist[0].content.length)}})}),$(".priceSort").click(function(){$.ajax({type:"get",async:!0,url:"../api/goodsList_data.json",success:function(t){n(t.goodslist[0].content.sort(function(t,n){return o?t.currentPrice-n.currentPrice:n.currentPrice-t.currentPrice}))}}),o=!o}),$(".sort span").click(function(){$(".sort span").css({background:"#f0f0f0",color:"#333"}),$(this).css({background:"red",color:"#fff"})}),$(".goodslist").on("mouseenter",".smallImg",function(){$oldImg=$(this).parent().parent().children().eq(0).children().eq(0),$newImg=$(this)[0].src,t=$oldImg[0].src,$oldImg[0].src=$newImg,$(this).css("border","1px solid red")}),$(".goodslist").on("mouseout",".smallImg",function(){$oldImg=$(this).parent().parent().children().eq(0).children().eq(0),$oldImg[0].src=t,$(this).css("border","1px solid #ccc")}),$(".goodslist").on("click","a",function(t){t.preventDefault();var n=$(this).closest("li")[0].className;$.ajax({type:"get",url:"../api/connectGoodsListDB.php",data:"goodId="+n,success:function(t){var n=JSON.parse(t);Cookie.set("good",JSON.stringify(n[0])),location="../html/goodDetail.html"}})})});