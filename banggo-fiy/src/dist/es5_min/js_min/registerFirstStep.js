"use strict";$(function(){function r(e){return!!/^[1][3,4,5,7,8][0-9]{9}$/.test(e.val())}function o(e){return!!/^[\u2E80-\u9FFF | \d | _ | a-z A-Z]{4,20}$/.test(e.val())}$(".randomCode").text(function(){return randomCode(4)}),$(".active").on("mouseenter","a",function(){$(this).css("background","#6e6e6e")}),$("#phone").val(""),$("#username").val(""),$(".updateCode").click(function(){$(".randomCode").text(function(){return randomCode(4)})}),$(".sendCode").click(function(){if($phoneInput=$("#phone"),$uesenameInput=$("#username"),r($phoneInput)&&o($uesenameInput))if($("#checkCode").val()===$(".randomCode").text()){Cookie.set("key",randomCode(4),{});$(".firstStep").css("display","none"),$(".secondStep").css("display","block")}else confirm("输入验证码错误")&&($(".randomCode").text(function(){return randomCode(4)}),$("#checkCode").val(""),$("#checkCode")[0].focus());else confirm("请正确输入表单信息")}),$("#username").keyup(function(){if(20<$(this).val().length||$(this).val().length<4)$(".errorUsername").text("用户名只能为4~20个字符,一个汉字为两个字符"),$(".errorUsername").css({opacity:"1",color:"red"});else if(o($(this))){var e=$(this).val();$.ajax({type:"get",url:"../api/register_username.php",data:"username="+e,success:function(e){"yes"===e?($(".errorUsername").text("用户名可用"),$(".errorUsername").css({opacity:"1",color:"green"})):($(".errorUsername").text("用户名已注册"),$(".errorUsername").css({opacity:"1",color:"red"}))}})}else $(".errorUsername").text("以中、英文开头，与数字、下划线组成"),$(".errorUsername").css({opacity:"1",color:"red"})}),$("#username").blur(function(){""===$(this).val()&&($(".errorUsername").text("用户名不能为空"),$(".errorUsername").css({opacity:"1",color:"red"}))}),$("#phone").keyup(function(){if(""===$(this).val())$(".errorPhone").css("opacity","1");else if(r($(this))){var e=$(this).val();$.ajax({type:"get",url:"../api/register_phone.php",data:"phone="+e,success:function(e){"yes"===e?($(".errorPhone").text("手机号码可用"),$(".errorPhone").css({opacity:"1",color:"green"})):($(".errorPhone").text("手机号不能重复注册"),$(".errorPhone").css({opacity:"1",color:"red"}))}})}else $(".errorPhone").text("手机号码不合法！"),$(".errorPhone").css({opacity:"1",color:"red"})}),$("#phone").blur(function(){""===$(this).val()&&($(".errorPhone").text("手机号码不能为空"),$(".errorPhone").css("opacity","1"))})});